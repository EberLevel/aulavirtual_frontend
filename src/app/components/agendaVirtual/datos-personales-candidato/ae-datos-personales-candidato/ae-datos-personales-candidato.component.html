<p-panel>
    <ng-template pTemplate="header">
        <span class="text-primary font-semibold text-xl">
            {{
                acciones === "add"
                    ? "Agregar Candidatos"
                    : acciones === "ver"
                    ? "Ver Candidatos"
                    : "Editar Candidatos"
            }}
        </span>
    </ng-template>

    <ng-template pTemplate="content">
        <form [formGroup]="postulanteForm" (ngSubmit)="guardarPostulante()">
            <div class="row">
                <div class="grid p-fluid">
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="code"
                            />
                            <label>Código de Candidato</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="apaterno"
                            />
                            <label>Apellido Paterno</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="amaterno"
                            />
                            <label>Apellido Materno</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="nombre"
                            />
                            <label>Nombres</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="generoOptions"
                                formControlName="genero"
                            ></p-dropdown>
                            <label>Género</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="telefono"
                            />
                            <label>Teléfono</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-calendar
                                formControlName="fecha_nacimiento"
                            ></p-calendar>
                            <label>Fecha de nacimiento</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="numero_documento"
                            />
                            <label>Número de documento</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="email"
                                pInputText
                                formControlName="email"
                            />
                            <label>Email</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="password"
                                pInputText
                                formControlName="contrasena"
                                [value]="passwordStored ? '********' : ''"
                            />
                            <label>Contraseña</label>
                        </span>
                    </div>
                    

                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="identificationDocuments"
                                formControlName="doc_identidad"
                                optionLabel="label"
                                optionValue="value"
                                placeholder="Seleccione un documento"
                            ></p-dropdown>
                            <label for="doc_identidad">Doc. Identidad</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="number"
                                pInputText
                                formControlName="edad"
                            />
                            <label>Edad</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="estadoCivilOptions"
                                formControlName="estado_civil"
                                optionLabel="label"
                                optionValue="value"
                                placeholder="Seleccione estado civil"
                            ></p-dropdown>
                            <label>Estado Civil</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="puesto"
                            />
                            <label>Puesto</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="grado_instruccion"
                            />
                            <label>% de Avance</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <input
                                type="text"
                                pInputText
                                formControlName="profesion"
                            />
                            <label>Profesión - Ocupación</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="afiliacionOptions"
                                formControlName="ocupacion_actual"
                                optionLabel="label"
                                optionValue="value"
                                placeholder="Seleccione Afiliación"
                            >
                            </p-dropdown>
                            <label>Estado de Afiliación</label>
                        </span>
                    </div>

                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-fileUpload
                                mode="basic"
                                chooseLabel="Adjunte documento"
                                chooseIcon="pi pi-upload"
                                (onSelect)="onFileChange($event)"
                            >
                            </p-fileUpload>
                        </span>
                        <small *ngIf="postulanteForm.get('imagen')?.value">
                            Archivo cargado con éxito
                        </small>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="estadoOptions"
                                formControlName="estado_actual"
                                optionLabel="label"
                                optionValue="value"
                                placeholder="Seleccione Estado"
                                (onChange)="onEstadoChange($event)"
                                [style]="{
                                    'background-color': selectedEstadoColor
                                }"
                            >
                            </p-dropdown>
                            <label>Estado</label>
                        </span>
                    </div>
                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-calendar
                                formControlName="fecha_afiliacion"
                            ></p-calendar>
                            <label>Fecha de afiliación</label>
                        </span>
                    </div>

                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="departamentoOptions"
                                formControlName="departamento"
                                optionLabel="name"
                                optionValue="id"
                                placeholder="Seleccione Departamento"
                                (onChange)="onChangeDepartamento($event)"
                            ></p-dropdown>
                            <label>Departamento</label>
                        </span>
                    </div>

                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="provinciaOptions"
                                formControlName="provincia"
                                optionLabel="name"
                                optionValue="id"
                                placeholder="Seleccione Provincia"
                                (onChange)="onChangeProvincia($event)"
                            ></p-dropdown>
                            <label>Provincia</label>
                        </span>
                    </div>

                    <div class="field col-6">
                        <span class="p-float-label">
                            <p-dropdown
                                [options]="distritoOptions"
                                formControlName="distrito"
                                optionLabel="name"
                                optionValue="id"
                                placeholder="Seleccione Distrito"
                                (onChange)="onChangeDistrito($event)"
                            ></p-dropdown>
                            <label>Distrito</label>
                        </span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="flex justify-content-end flex-column sm:flex-row">
                    <div class="flex flex-wrap gap-2">
                        <button
                            *ngIf="acciones === 'add'"
                            pButton
                            icon="pi pi-plus"
                            label="Guardar"
                            iconPos="right"
                            class="p-button-success p-button-sm"
                            type="submit"
                        ></button>
                        <button
                            *ngIf="acciones === 'actualizar'"
                            pButton
                            icon="pi pi-refresh"
                            label="Actualizar"
                            iconPos="right"
                            class="p-button-warning p-button-sm"
                            type="submit"
                        ></button>
                        <button
                            pButton
                            label="Cerrar"
                            icon="pi pi-times"
                            iconPos="right"
                            class="p-button-close-clean"
                            (click)="closeModal($event)"
                        ></button>
                    </div>
                </div>
            </div>
        </form>
        <app-informacion-academica-candidato
        *ngIf="(rolId === 8 || rolId === 22) && acciones !== 'add'"
        [candidatoId]="postulanteId"
        [mostrarAcciones]="false"
    ></app-informacion-academica-candidato>
    </ng-template>
</p-panel>
